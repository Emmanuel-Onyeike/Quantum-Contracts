<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>TechNxxt Support Dashboard</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
  <style>
    /* Custom CSS for slide-out menu */
    .slide-out-menu {
      transform: translateX(100%);
      transition: transform 0.3s ease-in-out;
    }
    .slide-out-menu.open {
      transform: translateX(0);
    }
    .modal-overlay {
      z-index: 100;
    }
    /* Ensure no horizontal scrolling on smaller screens */
    html, body {
      overflow-x: hidden;
    }
    /* Skeleton Loader */
    .skeleton-loader {
      background-color: #1a1a1a;
      border-radius: 0.5rem;
      animation: pulse 1.5s infinite ease-in-out;
    }
    .skeleton-loader-text {
        height: 1rem;
        margin-bottom: 0.5rem;
    }
    .skeleton-loader-card {
        height: 6rem;
    }
    @keyframes pulse {
      0% { opacity: 0.8; }
      50% { opacity: 0.5; }
      100% { opacity: 0.8; }
    }
    /* Scrollable Activity Log */
    .activity-log {
        max-height: 20rem; /* Adjust this value as needed */
        overflow-y: auto;
    }
  </style>
</head>
<body class="bg-black text-gray-200 font-sans">
  <header class="md:hidden sticky top-0 bg-black/80 backdrop-blur-sm z-40 p-4 border-b border-gray-700 flex items-center justify-between">
    <h1 id="page-title-mobile" class="text-xl font-bold capitalize">Overview</h1>
    <button id="openMenu" class="p-2 rounded-lg bg-gray-800 text-white">
      <i class="fas fa-bars"></i>
    </button>
  </header>

  <div class="flex min-h-screen">
    <aside id="desktop-sidebar" class="hidden md:flex w-64 flex-col bg-black border-r border-gray-700">
      <div class="p-6 border-b border-gray-700">
        <h2 class="text-2xl font-bold text-white">TechNxxt</h2>
        <p class="text-sm text-gray-400">Support Dashboard</p>
      </div>
      <nav class="flex-1 p-4 flex flex-col gap-2">
        <button class="nav-btn flex items-center gap-3 px-4 py-2 rounded-lg hover:bg-gray-800" data-tab="overview">
          <i class="fas fa-chart-line"></i> Overview
        </button>
        <button class="nav-btn flex items-center gap-3 px-4 py-2 rounded-lg hover:bg-gray-800" data-tab="contract">
          <i class="fas fa-file-contract"></i> Contract
        </button>
        <button class="nav-btn flex items-center gap-3 px-4 py-2 rounded-lg hover:bg-gray-800" data-tab="dust">
          <i class="fas fa-magic"></i> Dust
        </button>
        <button class="nav-btn flex items-center gap-3 px-4 py-2 rounded-lg hover:bg-gray-800" data-tab="billing">
          <i class="fas fa-receipt"></i> Billing
        </button>
        <button class="nav-btn flex items-center gap-3 px-4 py-2 rounded-lg hover:bg-gray-800" data-tab="payment">
          <i class="fas fa-dollar-sign"></i> Payment
        </button>
        <button class="nav-btn flex items-center gap-3 px-4 py-2 rounded-lg hover:bg-gray-800" data-tab="settings">
          <i class="fas fa-cog"></i> Settings
        </button>
      </nav>
      <div class="p-4 border-t border-gray-700 text-sm text-gray-500">
        © 2025 TechNxxt
      </div>
    </aside>

    <main class="flex-1 p-6 pt-20 md:pt-6">
      <h1 id="page-title" class="hidden md:block text-3xl font-bold mb-6 capitalize">Overview</h1>

      <div id="initial-loader" class="space-y-6">
        <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
          <div class="skeleton-loader skeleton-loader-card"></div>
          <div class="skeleton-loader skeleton-loader-card"></div>
          <div class="skeleton-loader skeleton-loader-card"></div>
          <div class="skeleton-loader skeleton-loader-card"></div>
        </div>
        <div class="skeleton-loader h-10 w-48"></div>
        <div class="skeleton-loader h-64"></div>
        <div class="skeleton-loader h-64"></div>
        <div class="skeleton-loader h-64"></div>
      </div>
      
      <div id="overview" class="tab-content bg-[#0d0d0d] border border-gray-700 p-6 rounded-xl shadow text-gray-200 hidden">
        <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
          <div class="p-4 border border-white/20 rounded-xl bg-[#1a1a1a] hover:bg-[#222] transition flex items-center justify-between shadow">
            <div>
              <p class="text-gray-400 text-sm">Pending contracts</p>
              <h3 id="pendingCount" class="text-2xl font-bold">0</h3>
            </div>
            <i class="fas fa-file-contract text-2xl text-red-500"></i>
          </div>
          <div class="p-4 border border-white/20 rounded-xl bg-[#1a1a1a] hover:bg-[#222] transition flex items-center justify-between shadow">
            <div>
              <p class="text-gray-400 text-sm">Total Contracts</p>
              <h3 id="totalCount" class="text-2xl font-bold">0</h3>
            </div>
            <i class="fas fa-file-contract text-2xl text-blue-400"></i>
          </div>
          <div class="p-4 border border-white/20 rounded-xl bg-[#1a1a1a] hover:bg-[#222] transition flex items-center justify-between shadow">
          <div>
                    <p class="text-gray-400 text-sm">Revenue</p>
                 <h3 id="revenueCount" class="text-2xl font-bold">$0</h3>
                </div>
                <i class="fas fa-chart-line text-2xl text-green-400"></i>
            </div>
          <div class="p-4 border border-white/20 rounded-xl bg-[#1a1a1a] hover:bg-[#222] transition flex items-center justify-between shadow">
            <div>
              <p class="text-gray-400 text-sm">Active Users</p>
              <h3 id="usersCount" class="text-2xl font-bold">0</h3>
            </div>
            <i class="fas fa-users text-2xl text-purple-400"></i>
          </div>
        </div>

        <div class="flex flex-col md:flex-row gap-3 mb-6">
          <button onclick="openModal('addContractModal')" class="w-full md:w-auto px-5 py-2 rounded-xl bg-transparent border border-white/30 text-white hover:bg-white/10 hover:border-white/60 hover:scale-105 transition shadow-sm">
            <i class="fas fa-plus"></i> Add Contract
          </button>
        </div>

        <div class="p-6 border border-white/20 rounded-xl bg-[#1a1a1a] mb-6">

          <h3 class="text-lg font-bold mb-3">Revenue Activity</h3>

         <ul id="revenue-activity-log" class="space-y-2 text-gray-400">

            <li class="p-3 border border-white/20 rounded-lg bg-[#0d0d0d] hover:bg-[#222] transition">No revenue activity recorded.</li>

          </ul>

        </div>

           <div class="p-6 border border-white/20 rounded-xl bg-[#1a1a1a] mb-6">
          <h3 class="text-lg font-bold mb-3">Recent Activity</h3>
          <ul id="recent-activity-log" class="space-y-2 activity-log">
            <li class="p-3 border border-white/20 rounded-lg bg-[#0d0d0d] hover:bg-[#222] transition">No activity yet.</li>
          </ul>
        </div>
        <div class="p-6 border border-white/20 rounded-xl bg-[#1a1a1a]">
          <h3 class="text-lg font-bold mb-3">Recent Contracts</h3>
          <div class="activity-log overflow-x-auto">
            <table class="w-full text-left border border-white/20 rounded-lg text-gray-300">
              <thead class="bg-[#111] text-gray-400">
                <tr>
                  <th class="px-4 py-2 border-b border-white/20">ID</th>
                  <th class="px-4 py-2 border-b border-white/20">Client</th>
                  <th class="px-4 py-2 border-b border-white/20">Status</th>
                  <th class="px-4 py-2 border-b border-white/20">Date</th>
                </tr>
              </thead>
              <tbody>
                <tr class="hover:bg-[#222] transition">
                  <td colspan="4" class="text-center text-gray-500 py-4">No contracts yet.</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>

      <div id="contract" class="tab-content hidden p-6 text-center">
        <div class="text-4xl text-blue-400 mb-4">📑</div>
        <p class="text-xl mb-4">All active and pending Contracts are listed here.</p>
        
        <button onclick="openModal('dustContractModal')" class="w-full md:w-auto px-5 py-2 rounded-xl bg-yellow-600/20 text-yellow-400 border border-yellow-500 hover:bg-yellow-600/30 transition shadow-sm mb-6">
          <i class="fas fa-trash-alt"></i> Dust Contract
        </button>

        <div class="bg-gray-900 border border-gray-700 rounded-xl p-6 md:p-10 text-left">
          <h3 class="text-2xl font-bold text-white mb-4">Activate a Pending Contract</h3>
          <p class="text-gray-400 mb-6">To activate your contract, please enter the unique code from your payment receipt.</p>
          
          <div class="space-y-6">
            <div>
              <label for="autoGeneratedCode" class="block text-gray-300 text-sm font-medium mb-2">Auto-Generated Code</label>
              <input type="text" id="autoGeneratedCode" readonly placeholder="No code yet" class="w-full px-4 py-3 rounded-lg bg-white/5 border border-white/20 text-white placeholder-gray-500 cursor-not-allowed">
            </div>
            
            <div>
              <label for="newCodeOnReceipt" class="block text-gray-300 text-sm font-medium mb-2">Code on Receipt (Ends with 100)</label>
              <input type="text" id="newCodeOnReceipt" placeholder="Enter new code from receipt" class="w-full px-4 py-3 rounded-lg bg-white/5 border border-white/20 text-white placeholder-gray-500 focus:outline-none focus:border-blue-400 focus:ring-2 focus:ring-blue-500/40 transition">
            </div>

            <button id="verifyBtn" onclick="verifyAndActivate()" class="w-full px-6 py-3 rounded-xl bg-gradient-to-r from-blue-500 to-indigo-500 hover:from-blue-600 hover:to-indigo-600 text-white font-semibold shadow-md hover:shadow-lg transition">
              Verify and Activate
            </button>
            <p id="verification-status" class="mt-4 text-center text-sm font-semibold hidden"></p>
          </div>
        </div>
      </div>

      <div id="dust" class="tab-content hidden bg-gray-900 border border-gray-700 p-6 rounded-xl shadow text-gray-200">
        <div class="flex items-center gap-4 mb-4">
          <div class="text-4xl text-yellow-400">✨</div>
          <h2 class="text-2xl font-bold text-white">Dusted Contracts</h2>
        </div>
        <p class="text-gray-400 mb-6">
          This is where you can find contracts that have been archived or retired.
          They are no longer active, but you can restore them at any time.
        </p>
        
        <div id="dusted-contracts-list" class="space-y-4">
          <div class="text-center text-gray-500 py-10">No contracts have been dusted yet.</div>
        </div>
      </div>

       <div id="billing" class="tab-content hidden p-6 text-center bg-gray-900 border border-gray-700 rounded-xl shadow text-gray-200">
                <div class="text-4xl text-pink-400 mb-4">💳</div>
                <p class="text-xl">Manage your Billing details, invoices, and receipts here.</p>
                
                <!-- Billing Plans Section -->
                <div class="my-8">
                    <div class="inline-flex rounded-full bg-gray-800 p-1 mb-8">
                        <button id="monthlyBtn" onclick="showPlans('monthly')" class="px-6 py-2 rounded-full text-white font-semibold bg-blue-500 transition-colors duration-300">
                            Monthly
                        </button>
                        <button id="yearlyBtn" onclick="showPlans('yearly')" class="px-6 py-2 rounded-full text-gray-400 hover:text-white transition-colors duration-300">
                            Yearly
                        </button>
                    </div>

                    <!-- Monthly Plans -->
                    <div id="monthly-plans" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        <!-- Free Plan -->
                        <div class="flex flex-col p-8 rounded-2xl bg-gray-800 border border-white/20 transition-all duration-300 transform hover:scale-105 shadow-xl">
                            <h3 class="text-2xl font-bold text-white">Free</h3>
                            <p class="text-gray-400 mt-2">Get started with basic tools.</p>
                            <p class="text-4xl font-extrabold text-blue-400 my-6">
                                $0<span class="text-lg font-normal text-gray-400">/mo</span>
                            </p>
                            <ul class="text-left space-y-3 flex-1 mb-8">
                                <li class="flex items-center gap-3 text-gray-300">
                                    <i class="fas fa-check-circle text-green-500"></i> Basic Contract Creation
                                </li>
                                <li class="flex items-center gap-3 text-gray-300">
                                    <i class="fas fa-check-circle text-green-500"></i> Revenue Tracking
                                </li>
                                <li class="flex items-center gap-3 text-gray-300">
                                    <i class="fas fa-check-circle text-green-500"></i> Standard Support
                                </li>
                            </ul>
                            <button onclick="openModal('messageModal', 'Your Current Plan', 'You are currently on the Free plan.')" class="w-full py-3 rounded-xl bg-gray-600 text-white font-semibold hover:bg-gray-700 transition">Current Plan</button>
                        </div>

                        <!-- Beta Plan -->
                        <div class="flex flex-col p-8 rounded-2xl bg-gray-800 border-2 border-indigo-500 transition-all duration-300 transform hover:scale-105 shadow-xl relative overflow-hidden">
                            <div class="absolute top-0 right-0 bg-indigo-500 text-white text-xs font-bold px-3 py-1 rounded-bl-lg">BETA</div>
                            <h3 class="text-2xl font-bold text-white">Beta</h3>
                            <p class="text-gray-400 mt-2">Access our features.</p>
                            <p class="text-4xl font-extrabold text-indigo-400 my-6">
                                custom<span class="text-lg font-normal text-gray-400">/</span>
                            </p>
                            <ul class="text-left space-y-3 flex-1 mb-8">
                                <li class="flex items-center gap-3 text-gray-300">
                                    <i class="fas fa-check-circle text-green-500"></i> Everything 
                                </li>
                                <li class="flex items-center gap-3 text-gray-300">
                                    <i class="fas fa-check-circle text-green-500"></i> Early Access to New Features
                                </li>
                                <li class="flex items-center gap-3 text-gray-300">
                                    <i class="fas fa-check-circle text-green-500"></i> Priority Bug Fixes
                                </li>
                            </ul>
                            <button onclick="handlePayment('Beta Monthly')" class="w-full py-3 rounded-xl bg-gradient-to-r from-indigo-500 to-purple-500 text-white font-semibold shadow-md hover:shadow-lg transition">Upgrade Now</button>
                        </div>
                        
                        <!-- Custom Plan -->
                        <div class="flex flex-col p-8 rounded-2xl bg-gray-800 border border-white/20 transition-all duration-300 transform hover:scale-105 shadow-xl">
                            <h3 class="text-2xl font-bold text-white">Custom</h3>
                            <p class="text-gray-400 mt-2">Tailor a plan to your needs.</p>
                            <p class="text-4xl font-extrabold text-orange-400 my-6">
                                Quote
                            </p>
                            <ul class="text-left space-y-3 flex-1 mb-8">
                                <li class="flex items-center gap-3 text-gray-300">
                                    <i class="fas fa-check-circle text-green-500"></i> Advanced API Access
                                </li>
                                <li class="flex items-center gap-3 text-gray-300">
                                    <i class="fas fa-check-circle text-green-500"></i> Dedicated Account Manager
                                </li>
                                <li class="flex items-center gap-3 text-gray-300">
                                    <i class="fas fa-check-circle text-green-500"></i> Unlimited Contracts
                                </li>
                            </ul>
                            <button onclick="openModal('messageModal', 'Contact Sales', 'Thank you for your interest! We will contact you soon.')" class="w-full py-3 rounded-xl bg-gradient-to-r from-orange-500 to-red-500 text-white font-semibold shadow-md hover:shadow-lg transition">Contact Sales</button>
                        </div>

                        <!-- Starter Plan -->
                        <div class="flex flex-col p-8 rounded-2xl bg-gray-800 border border-white/20 transition-all duration-300 transform hover:scale-105 shadow-xl">
                            <h3 class="text-2xl font-bold text-white">Starter</h3>
                            <p class="text-gray-400 mt-2">The essential package for rapid growth.</p>
                            <p class="text-4xl font-extrabold text-green-400 my-6">
                                $400<span class="text-lg font-normal text-gray-400">/3mo</span>
                            </p>
                            <ul class="text-left space-y-3 flex-1 mb-8">
                                <li class="flex items-center gap-3 text-gray-300">
                                    <i class="fas fa-check-circle text-green-500"></i> 5 Contracts / Month
                                </li>
                                <li class="flex items-center gap-3 text-gray-300">
                                    <i class="fas fa-check-circle text-green-500"></i> Priority Queueing
                                </li>
                                <li class="flex items-center gap-3 text-gray-300">
                                    <i class="fas fa-check-circle text-green-500"></i> 24/7 Live Chat Support
                                </li>
                            </ul>
                            <button onclick="handlePayment('Starter Monthly')" class="w-full py-3 rounded-xl bg-gradient-to-r from-green-500 to-emerald-500 text-white font-semibold shadow-md hover:shadow-lg transition">Pay Now</button>
                        </div>

                        <!-- Business Plan -->
                        <div class="flex flex-col p-8 rounded-2xl bg-gray-800 border-2 border-yellow-500 transition-all duration-300 transform hover:scale-105 shadow-xl">
                            <h3 class="text-2xl font-bold text-white">Business</h3>
                            <p class="text-gray-400 mt-2">Designed for scaling businesses.</p>
                            <p class="text-4xl font-extrabold text-yellow-400 my-6">
                                $600<span class="text-lg font-normal text-gray-400">/6mo</span>
                            </p>
                            <ul class="text-left space-y-3 flex-1 mb-8">
                                <li class="flex items-center gap-3 text-gray-300">
                                    <i class="fas fa-check-circle text-green-500"></i> 15 Contracts / Month
                                </li>
                                <li class="flex items-center gap-3 text-gray-300">
                                    <i class="fas fa-check-circle text-green-500"></i> Unlimited Dusted Contracts
                                </li>
                                <li class="flex items-center gap-3 text-gray-300">
                                    <i class="fas fa-check-circle text-green-500"></i> API Access & Integrations
                                </li>
                            </ul>
                            <button onclick="handlePayment('Business Monthly')" class="w-full py-3 rounded-xl bg-gradient-to-r from-yellow-500 to-amber-500 text-white font-semibold shadow-md hover:shadow-lg transition">Pay Now</button>
                        </div>
                        
                        <!-- Enterprise Plan -->
                        <div class="flex flex-col p-8 rounded-2xl bg-gray-800 border border-white/20 transition-all duration-300 transform hover:scale-105 shadow-xl">
                            <h3 class="text-2xl font-bold text-white">Enterprise</h3>
                            <p class="text-gray-400 mt-2">The ultimate solution for large-scale operations.</p>
                            <p class="text-4xl font-extrabold text-red-400 my-6">
                                $1000<span class="text-lg font-normal text-gray-400">/9mo</span>
                            </p>
                            <ul class="text-left space-y-3 flex-1 mb-8">
                                <li class="flex items-center gap-3 text-gray-300">
                                    <i class="fas fa-check-circle text-green-500"></i> Unlimited Contracts
                                </li>
                                <li class="flex items-center gap-3 text-gray-300">
                                    <i class="fas fa-check-circle text-green-500"></i> Dedicated Onboarding Specialist
                                </li>
                                <li class="flex items-center gap-3 text-gray-300">
                                    <i class="fas fa-check-circle text-green-500"></i> Advanced Security & Audits
                                </li>
                            </ul>
                            <button onclick="handlePayment('Enterprise Monthly')" class="w-full py-3 rounded-xl bg-gradient-to-r from-red-500 to-pink-500 text-white font-semibold shadow-md hover:shadow-lg transition">Pay Now</button>
                        </div>
                    </div>

                    <!-- Yearly Plans (Initially hidden) -->
                    <div id="yearly-plans" class="hidden grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        <!-- Free Plan -->
                        <div class="flex flex-col p-8 rounded-2xl bg-gray-800 border border-white/20 transition-all duration-300 transform hover:scale-105 shadow-xl">
                            <h3 class="text-2xl font-bold text-white">Free</h3>
                            <p class="text-gray-400 mt-2">Get started with basic tools.</p>
                            <p class="text-4xl font-extrabold text-blue-400 my-6">
                                $0<span class="text-lg font-normal text-gray-400">/yr</span>
                            </p>
                            <ul class="text-left space-y-3 flex-1 mb-8">
                                <li class="flex items-center gap-3 text-gray-300">
                                    <i class="fas fa-check-circle text-green-500"></i> Basic Contract Creation
                                </li>
                                <li class="flex items-center gap-3 text-gray-300">
                                    <i class="fas fa-check-circle text-green-500"></i> Revenue Tracking
                                </li>
                                <li class="flex items-center gap-3 text-gray-300">
                                    <i class="fas fa-check-circle text-green-500"></i> Standard Support
                                </li>
                            </ul>
                            <button onclick="openModal('messageModal', 'Your Current Plan', 'You are currently on the Free plan.')" class="w-full py-3 rounded-xl bg-gray-600 text-white font-semibold hover:bg-gray-700 transition">Current Plan</button>
                        </div>

                        <!-- Beta Plan -->
                        <div class="flex flex-col p-8 rounded-2xl bg-gray-800 border-2 border-indigo-500 transition-all duration-300 transform hover:scale-105 shadow-xl relative overflow-hidden">
                            <div class="absolute top-0 right-0 bg-indigo-500 text-white text-xs font-bold px-3 py-1 rounded-bl-lg">BETA</div>
                            <h3 class="text-2xl font-bold text-white">Beta</h3>
                            <p class="text-gray-400 mt-2">Access our features.</p>
                            <p class="text-4xl font-extrabold text-indigo-400 my-6">
                                custom v2<span class="text-lg font-normal text-gray-400">/</span>
                            </p>
                            <ul class="text-left space-y-3 flex-1 mb-8">
                                <li class="flex items-center gap-3 text-gray-300">
                                    <i class="fas fa-check-circle text-green-500"></i> Everything 
                                </li>
                                <li class="flex items-center gap-3 text-gray-300">
                                    <i class="fas fa-check-circle text-green-500"></i> Early Access to New Features
                                </li>
                                <li class="flex items-center gap-3 text-gray-300">
                                    <i class="fas fa-check-circle text-green-500"></i> Priority Bug Fixes
                                </li>
                            </ul>
                            <button onclick="handlePayment('Beta Yearly')" class="w-full py-3 rounded-xl bg-gradient-to-r from-indigo-500 to-purple-500 text-white font-semibold shadow-md hover:shadow-lg transition">Upgrade Now</button>
                        </div>
                        
                        <!-- Custom Plan -->
                        <div class="flex flex-col p-8 rounded-2xl bg-gray-800 border border-white/20 transition-all duration-300 transform hover:scale-105 shadow-xl">
                            <h3 class="text-2xl font-bold text-white">Custom</h3>
                            <p class="text-gray-400 mt-2">Tailor a plan to your needs.</p>
                            <p class="text-4xl font-extrabold text-orange-400 my-6">
                                Quote
                            </p>
                            <ul class="text-left space-y-3 flex-1 mb-8">
                                <li class="flex items-center gap-3 text-gray-300">
                                    <i class="fas fa-check-circle text-green-500"></i> Advanced API Access
                                </li>
                                <li class="flex items-center gap-3 text-gray-300">
                                    <i class="fas fa-check-circle text-green-500"></i> Dedicated Account Manager
                                </li>
                                <li class="flex items-center gap-3 text-gray-300">
                                    <i class="fas fa-check-circle text-green-500"></i> Unlimited Contracts
                                </li>
                            </ul>
                            <button onclick="openModal('messageModal', 'Contact Sales', 'Thank you for your interest! We will contact you soon.')" class="w-full py-3 rounded-xl bg-gradient-to-r from-orange-500 to-red-500 text-white font-semibold shadow-md hover:shadow-lg transition">Contact Sales</button>
                        </div>

                        <!-- Growth Plan -->
                        <div class="flex flex-col p-8 rounded-2xl bg-gray-800 border border-white/20 transition-all duration-300 transform hover:scale-105 shadow-xl">
                            <h3 class="text-2xl font-bold text-white">Growth</h3>
                            <p class="text-gray-400 mt-2">Unlock continuous growth and scale.</p>
                            <p class="text-4xl font-extrabold text-green-400 my-6">
                                $1900<span class="text-lg font-normal text-gray-400">/2yrs</span>
                            </p>
                            <ul class="text-left space-y-3 flex-1 mb-8">
                                <li class="flex items-center gap-3 text-gray-300">
                                    <i class="fas fa-check-circle text-green-500"></i> All Monthly Business Features
                                </li>
                                <li class="flex items-center gap-3 text-gray-300">
                                    <i class="fas fa-check-circle text-green-500"></i> 10% Discount on Add-ons
                                </li>
                                <li class="flex items-center gap-3 text-gray-300">
                                    <i class="fas fa-check-circle text-green-500"></i> Annual Performance Review
                                </li>
                            </ul>
                            <button onclick="handlePayment('Growth Yearly')" class="w-full py-3 rounded-xl bg-gradient-to-r from-green-500 to-emerald-500 text-white font-semibold shadow-md hover:shadow-lg transition">Pay Now</button>
                        </div>
                        
                        <!-- Scale Plan -->
                        <div class="flex flex-col p-8 rounded-2xl bg-gray-800 border-2 border-yellow-500 transition-all duration-300 transform hover:scale-105 shadow-xl">
                            <h3 class="text-2xl font-bold text-white">Scale</h3>
                            <p class="text-gray-400 mt-2">Supercharge your operations.</p>
                            <p class="text-4xl font-extrabold text-yellow-400 my-6">
                                $4000<span class="text-lg font-normal text-gray-400">/4yrs</span>
                            </p>
                            <ul class="text-left space-y-3 flex-1 mb-8">
                                <li class="flex items-center gap-3 text-gray-300">
                                    <i class="fas fa-check-circle text-green-500"></i> All Monthly Enterprise Features
                                </li>
                                <li class="flex items-center gap-3 text-gray-300">
                                    <i class="fas fa-check-circle text-green-500"></i> Dedicated Support Channel
                                </li>
                                <li class="flex items-center gap-3 text-gray-300">
                                    <i class="fas fa-check-circle text-green-500"></i> Custom Reporting Dashboards
                                </li>
                            </ul>
                            <button onclick="handlePayment('Scale Yearly')" class="w-full py-3 rounded-xl bg-gradient-to-r from-yellow-500 to-amber-500 text-white font-semibold shadow-md hover:shadow-lg transition">Pay Now</button>
                        </div>

                        <!-- Master Plan -->
                        <div class="flex flex-col p-8 rounded-2xl bg-gray-800 border border-white/20 transition-all duration-300 transform hover:scale-105 shadow-xl">
                            <h3 class="text-2xl font-bold text-white">Master</h3>
                            <p class="text-gray-400 mt-2">Become a leader in your field.</p>
                            <p class="text-4xl font-extrabold text-red-400 my-6">
                                $6000<span class="text-lg font-normal text-gray-400">/7yrs</span>
                            </p>
                            <ul class="text-left space-y-3 flex-1 mb-8">
                                <li class="flex items-center gap-3 text-gray-300">
                                    <i class="fas fa-check-circle text-green-500"></i> Early Product Demos
                                </li>
                                <li class="flex items-center gap-3 text-gray-300">
                                    <i class="fas fa-check-circle text-green-500"></i> On-site Support (2 per year)
                                </li>
                                <li class="flex items-center gap-3 text-gray-300">
                                    <i class="fas fa-check-circle text-green-500"></i> Bi-annual Strategy Session
                                </li>
                            </ul>
                            <button onclick="handlePayment('Master Yearly')" class="w-full py-3 rounded-xl bg-gradient-to-r from-red-500 to-pink-500 text-white font-semibold shadow-md hover:shadow-lg transition">Pay Now</button>
                        </div>
                        
                        <!-- Elite Plan -->
                        <div class="flex flex-col p-8 rounded-2xl bg-gray-800 border-2 border-purple-500 transition-all duration-300 transform hover:scale-105 shadow-xl">
                            <h3 class="text-2xl font-bold text-white">Elite</h3>
                            <p class="text-gray-400 mt-2">The ultimate, all-inclusive package.</p>
                            <p class="text-4xl font-extrabold text-purple-400 my-6">
                                $8000<span class="text-lg font-normal text-gray-400">/9yrs</span>
                            </p>
                            <ul class="text-left space-y-3 flex-1 mb-8">
                                <li class="flex items-center gap-3 text-gray-300">
                                    <i class="fas fa-check-circle text-green-500"></i> Your Branding on Dashboard
                                </li>
                                <li class="flex items-center gap-3 text-gray-300">
                                    <i class="fas fa-check-circle text-green-500"></i> Dedicated Engineering Team
                                </li>
                                <li class="flex items-center gap-3 text-gray-300">
                                    <i class="fas fa-check-circle text-green-500"></i> VIP Invitation to Events
                                </li>
                            </ul>
                            <button onclick="handlePayment('Elite Yearly')" class="w-full py-3 rounded-xl bg-gradient-to-r from-purple-500 to-pink-500 text-white font-semibold shadow-md hover:shadow-lg transition">Pay Now</button>
                        </div>
                    </div>
                </div>
            </div>
     <script>
    // Get references to the monthly and yearly elements and buttons
    const monthlyBtn = document.getElementById('monthlyBtn');
    const yearlyBtn = document.getElementById('yearlyBtn');
    const monthlyPlans = document.getElementById('monthly-plans');
    const yearlyPlans = document.getElementById('yearly-plans');

    // Function to show the selected plan type
    function showPlans(planType) {
        // Check the plan type passed to the function
        if (planType === 'monthly') {
            // Show monthly plans and hide yearly plans
            monthlyPlans.classList.remove('hidden');
            yearlyPlans.classList.add('hidden');

            // Update button styles to show which one is active
            monthlyBtn.classList.add('bg-blue-500', 'text-white');
            monthlyBtn.classList.remove('text-gray-400');
            yearlyBtn.classList.add('text-gray-400');
            yearlyBtn.classList.remove('bg-blue-500', 'text-white');
        } else if (planType === 'yearly') {
            // Show yearly plans and hide monthly plans
            yearlyPlans.classList.remove('hidden');
            monthlyPlans.classList.add('hidden');

            // Update button styles to show which one is active
            yearlyBtn.classList.add('bg-blue-500', 'text-white');
            yearlyBtn.classList.remove('text-gray-400');
            monthlyBtn.classList.add('text-gray-400');
            monthlyBtn.classList.remove('bg-blue-500', 'text-white');
        }
    }

    // Placeholder function for handling payment
  
    // Modal functions to show and hide the message box
    function openModal(title, message) {
        const modal = document.getElementById('messageModal');
        const modalTitle = document.getElementById('modalTitle');
        const modalMessage = document.getElementById('modalMessage');

        // Set the content of the modal
        modalTitle.textContent = title;
        modalMessage.textContent = message;

        // Show the modal by removing the 'hidden' class and animating it in
        modal.classList.remove('hidden');
        setTimeout(() => {
            modal.querySelector('div').classList.remove('scale-95');
        }, 10);
    }

    function closeModal() {
        const modal = document.getElementById('messageModal');
        // Animate the modal out before hiding it
        modal.querySelector('div').classList.add('scale-95');
        setTimeout(() => {
            modal.classList.add('hidden');
        }, 300);
    }

    // Initial call to set the monthly plans as active on page load
    window.onload = () => {
        showPlans('monthly');
    };
</script>

 <div id="payment" class="tab-content active p-6 text-center bg-gray-900 border border-gray-700 rounded-xl shadow text-gray-200">
            <div class="text-4xl text-purple-400 mb-4">💰</div>
            <h2 class="text-2xl font-bold mb-4">Payments</h2>
            <p class="text-xl mb-6">View and process payments securely from this section.</p>

            <!-- Payment Method Selection -->
            <div class="bg-gray-800 border border-gray-700 rounded-xl p-6 mb-8">
                <h3 class="text-xl font-bold text-white mb-4">Select a Payment Method</h3>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                    <button onclick="showPaymentForm('card')" class="payment-method-btn flex flex-col items-center justify-center p-4 rounded-xl bg-gray-700 hover:bg-gray-600 transition-colors duration-300">
                        <i class="fas fa-credit-card text-3xl mb-2"></i>
                        <span class="text-sm">Card</span>
                    </button>
                    <button onclick="showPaymentForm('wallet')" class="payment-method-btn flex flex-col items-center justify-center p-4 rounded-xl bg-gray-700 hover:bg-gray-600 transition-colors duration-300">
                        <i class="fas fa-wallet text-3xl mb-2"></i>
                        <span class="text-sm">Wallet</span>
                    </button>
                    <button onclick="showPaymentForm('mobile')" class="payment-method-btn flex flex-col items-center justify-center p-4 rounded-xl bg-gray-700 hover:bg-gray-600 transition-colors duration-300">
                        <i class="fas fa-mobile-alt text-3xl mb-2"></i>
                        <span class="text-sm">Mobile Money</span>
                    </button>
                    <button onclick="showPaymentForm('bank')" class="payment-method-btn flex flex-col items-center justify-center p-4 rounded-xl bg-gray-700 hover:bg-gray-600 transition-colors duration-300">
                        <i class="fas fa-university text-3xl mb-2"></i>
                        <span class="text-sm">Bank Transfer</span>
                    </button>
                </div>
            </div>

            <!-- Payment Forms Container -->
           <div id="payment" class="tab-content active p-6 text-center bg-gray-900 border border-gray-700 rounded-xl shadow text-gray-200">
            <div class="text-4xl text-purple-400 mb-4">💰</div>
            <h2 class="text-2xl font-bold mb-4">Payments</h2>
            <p class="text-xl mb-6">View and process payments securely from this section.</p>

            <!-- Payment Method Selection -->
            <div class="bg-gray-800 border border-gray-700 rounded-xl p-6 mb-8">
                <h3 class="text-xl font-bold text-white mb-4">Select a Payment Method</h3>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                    <button onclick="displayComingSoon()" class="payment-method-btn flex flex-col items-center justify-center p-4 rounded-xl bg-gray-700 hover:bg-gray-600 transition-colors duration-300">
                        <i class="fas fa-credit-card text-3xl mb-2"></i>
                        <span class="text-sm">Coming Soon</span>
                    </button>
                    <button onclick="showPaymentForm('wallet')" class="payment-method-btn flex flex-col items-center justify-center p-4 rounded-xl bg-gray-700 hover:bg-gray-600 transition-colors duration-300">
                        <i class="fas fa-wallet text-3xl mb-2"></i>
                        <span class="text-sm">Wallet</span>
                    </button>
                    <button onclick="displayComingSoon()" class="payment-method-btn flex flex-col items-center justify-center p-4 rounded-xl bg-gray-700 hover:bg-gray-600 transition-colors duration-300">
                        <i class="fas fa-mobile-alt text-3xl mb-2"></i>
                        <span class="text-sm">Coming Soon</span>
                    </button>
                    <button onclick="displayComingSoon()" class="payment-method-btn flex flex-col items-center justify-center p-4 rounded-xl bg-gray-700 hover:bg-gray-600 transition-colors duration-300">
                        <i class="fas fa-university text-3xl mb-2"></i>
                        <span class="text-sm">Coming Soon</span>
                    </button>
                </div>
            </div>

            <!-- Payment Forms Container -->
            <div id="payment-forms-container">
                <!-- Wallet Payment Form -->
                <div id="wallet-form" class="payment-form hidden bg-gray-800 border border-gray-700 rounded-xl p-6">
                    <h3 class="text-xl font-bold text-white mb-4">Pay with Wallet</h3>
                    <div class="p-4 rounded-lg bg-gray-700 text-gray-200 mb-6">
                        <p class="text-sm font-semibold text-gray-400">Wallet Address</p>
                        <p class="text-lg text-white break-all">0x742d35Cc6634C2d89Db9b0D09Ff827aE8231De1d</p>
                    </div>
                    <p class="text-gray-400 mb-6">Enter your details and upload a screenshot of your wallet transfer.</p>
                    <form id="walletPaymentForm" onsubmit="processPayment(event, 'Wallet')">
                        <input type="text" id="walletName" class="w-full p-3 rounded-lg bg-gray-700 text-gray-200 placeholder-gray-500 mb-4" placeholder="Full Name" required>
                        <input type="email" id="walletEmail" class="w-full p-3 rounded-lg bg-gray-700 text-gray-200 placeholder-gray-500 mb-4" placeholder="Email Address" required>
                        <input type="number" id="walletAmount" class="w-full p-3 rounded-lg bg-gray-700 text-gray-200 placeholder-gray-500 mb-4" placeholder="Amount (e.g., 500)" required>
                        <label for="walletScreenshot" class="block text-left text-gray-400 mb-2">Upload Proof of Payment (Screenshot):</label>
                        <input type="file" id="walletScreenshot" class="w-full text-gray-200 mb-6" accept="image/*" required>
                        <button type="submit" class="w-full py-3 rounded-xl bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 text-white font-semibold shadow-md transition">
                            <i class="fas fa-check-circle"></i> Pay Now
                        </button>
                    </form>
                </div>

                <!-- Coming Soon Message -->
                <div id="coming-soon-message" class="hidden bg-gray-800 border border-gray-700 rounded-xl p-6 text-center">
                    <div class="text-6xl mb-4">🚧</div>
                    <h3 class="text-xl font-bold text-white mb-2">Coming Soon</h3>
                    <p class="text-gray-400">This payment method will be available shortly. Please check back later!</p>
                </div>
            </div>
            
            <!-- New Revenue Activity Log -->
            <div class="p-6 border border-white/20 rounded-xl bg-[#1a1a1a] mb-6">
                <h3 class="text-lg font-bold mb-3 text-white">Revenue Activity</h3>
                <ul id="revenue-activity-log" class="space-y-2 text-gray-400">
                    <li class="p-3 border border-white/20 rounded-lg bg-[#0d0d0d] hover:bg-[#222] transition">No revenue activity recorded.</li>
                </ul>
            </div>
        </div>

    </div>

    <!-- Receipt Modal HTML -->
    <div id="receiptModal" class="hidden fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center p-4 z-50">
        <div class="bg-white rounded-xl shadow-xl p-8 w-full max-w-md text-gray-800 flex flex-col justify-between" style="min-height: 400px;">
            <div id="receiptContent" class="overflow-auto flex-1">
                <!-- Receipt content will be dynamically generated here -->
            </div>
            <div class="mt-6 flex gap-4 justify-between">
                <button onclick="closeReceiptModal()" class="flex-1 py-3 rounded-xl bg-gray-200 text-gray-800 font-semibold hover:bg-gray-300 transition">Close</button>
                <button onclick="window.print()" class="flex-1 py-3 rounded-xl bg-green-600 text-white font-semibold hover:bg-green-700 transition">
                    <i class="fas fa-print mr-2"></i> Print / Download
                </button>
            </div>
        </div>
    </div>
    
    <!-- Modal HTML for Loading/Confirming -->
    <div id="processingModal" class="hidden fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center p-4 z-50">
        <div class="flex flex-col items-center">
            <div id="loadingIcon" class="animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-blue-500"></div>
            <p id="processingText" class="text-xl text-white mt-4">Checking for payment...</p>
        </div>
    </div>
    
<script>
    // Global variable to simulate revenue. We get the value from localStorage or default to 0.
    let totalRevenue = parseFloat(localStorage.getItem('totalRevenue')) || 0;

    // Function to generate a random validation code
    function generateValidationCode() {
        return Math.random().toString(36).substring(2, 10).toUpperCase();
    }

    // Function to show the selected payment form
    function showPaymentForm(formType) {
        // Hide all forms first
        document.querySelectorAll('.payment-form').forEach(form => {
            form.classList.add('hidden');
        });
        document.getElementById('coming-soon-message').classList.add('hidden');

        // Show the selected form
        document.getElementById(`${formType}-form`).classList.remove('hidden');

        // Update button styles to indicate active selection
        document.querySelectorAll('.payment-method-btn').forEach(btn => {
            btn.classList.remove('bg-gray-600');
            btn.classList.add('bg-gray-700');
        });
        document.querySelector(`button[onclick*="showPaymentForm('${formType}')"]`).classList.add('bg-gray-600');
    }

    // New function to display a "Coming Soon" message
    function displayComingSoon() {
        // Hide all forms first
        document.querySelectorAll('.payment-form').forEach(form => {
            form.classList.add('hidden');
        });
        
        // Show the coming soon message
        document.getElementById('coming-soon-message').classList.remove('hidden');

        // Update button styles to indicate active selection
        document.querySelectorAll('.payment-method-btn').forEach(btn => {
            btn.classList.remove('bg-gray-600');
            btn.classList.add('bg-gray-700');
        });
        
        // Find the clicked button and apply the active style
        const activeBtn = event.currentTarget;
        activeBtn.classList.add('bg-gray-600');
    }

    // Function to update the revenue display and log
    function updateRevenue(amount, message) {
        // Double the profit as requested
        totalRevenue += amount * 2;
        
        // Save the new total to localStorage for persistence
        localStorage.setItem('totalRevenue', totalRevenue.toFixed(2));
        
        // Update the display on the dashboard
        document.getElementById('revenueCount').textContent = `$${totalRevenue.toFixed(2)}`;
        
        // Add an entry to the payment log
        const logList = document.getElementById('revenue-activity-log');
        
        // Remove the initial "No revenue activity recorded." message if it exists
        const initialMessage = logList.querySelector('li');
        if (initialMessage && initialMessage.textContent.trim() === 'No revenue activity recorded.') {
            initialMessage.remove();
        }

        const newItem = document.createElement('li');
        newItem.classList.add('p-3', 'border', 'border-white/20', 'rounded-lg', 'bg-[#0d0d0d]', 'hover:bg-[#222]', 'transition');
        newItem.innerHTML = `<i class="fas fa-check-circle text-green-500 mr-2"></i> ${message}`;
        logList.prepend(newItem);
    }

    // Function to generate the receipt HTML
    function generateReceipt(details) {
        const { name, email, amount, method, validationCode } = details;
        const transactionId = `TXN-${Math.random().toString(36).substring(2, 12).toUpperCase()}`;
        const date = new Date().toLocaleString();

        return `
            <div class="text-center">
                <div class="text-2xl font-bold text-gray-800 mb-2">Tech Nxxt</div>
                <p class="text-sm text-gray-500">Your Payment Receipt</p>
            </div>
            <div class="my-6 border-b border-gray-200"></div>
            <div class="space-y-4">
                <div>
                    <p class="text-xs font-semibold text-gray-500 uppercase">Transaction ID</p>
                    <p class="font-mono text-lg text-gray-900">${transactionId}</p>
                </div>
                <div>
                    <p class="text-xs font-semibold text-gray-500 uppercase">Date</p>
                    <p class="text-lg text-gray-900">${date}</p>
                </div>
                <div>
                    <p class="text-xs font-semibold text-gray-500 uppercase">Amount Paid</p>
                    <p class="text-3xl font-bold text-green-600">$${parseFloat(amount).toFixed(2)}</p>
                </div>
                <div>
                    <p class="text-xs font-semibold text-gray-500 uppercase">Paid By</p>
                    <p class="text-lg text-gray-900">${name}</p>
                </div>
                <div>
                    <p class="text-xs font-semibold text-gray-500 uppercase">Payment Method</p>
                    <p class="text-lg text-gray-900">${method}</p>
                </div>
            </div>
            <div class="my-6 border-b border-gray-200"></div>
            <div class="text-center">
                <p class="text-sm text-gray-500">Validation Code:</p>
                <p class="text-xl font-bold text-purple-600">${validationCode}</p>
                <p class="mt-4 text-sm text-gray-500">Thank you for your payment!</p>
            </div>
        `;
    }

    // Main function to process the payment form
    function processPayment(event, method) {
        event.preventDefault(); // Prevent form submission
        
        // Get the form elements for the current method
        const formId = event.target.id;
        const amountInput = document.getElementById(`${formId.replace('PaymentForm', 'Amount')}`);
        const nameInput = document.getElementById(`${formId.replace('PaymentForm', 'Name')}`);
        const emailInput = document.getElementById(`${formId.replace('PaymentForm', 'Email')}`);
        const screenshotInput = document.getElementById(`${formId.replace('PaymentForm', 'Screenshot')}`);

        const amount = parseFloat(amountInput.value);
        const name = nameInput.value;
        const email = emailInput.value;
        const screenshot = screenshotInput.files[0];

        // Basic client-side validation
        if (!amount || !name || !email || !screenshot) {
            // Note: I am not validating card details as this is a front-end simulation
            openModal('processingModal', 'Error', 'Please fill out all required fields and upload a screenshot.', false);
            return;
        }

        // Show loading modal
        showProcessingModal("Checking for payment...");

        // Simulate a 6-second processing time
        setTimeout(() => {
            // Update processing text to "Confirming..." after 6 seconds
            document.getElementById('processingText').textContent = "Confirming...";
            document.getElementById('loadingIcon').classList.add('animate-spin');

            // Wait another second for the "confirming" message to show
            setTimeout(() => {
                closeProcessingModal(); // Close the processing modal
                
                // Generate validation code
                const validationCode = generateValidationCode();

                // Generate and display the receipt
                const receiptDetails = { name, email, amount, method, validationCode };
                const receiptHtml = generateReceipt(receiptDetails);
                document.getElementById('receiptContent').innerHTML = receiptHtml;
                openReceiptModal();
                
                // Update the revenue log and total
                const logMessage = `Payment of $${amount} from ${name} received via ${method}. Revenue doubled to $${amount * 2}.`;
                updateRevenue(amount, logMessage);

            }, 1000); // 1-second delay for "confirming" message
        }, 6000); // 6-second initial delay
    }

    // Modal functions for receipt
    function openReceiptModal() {
        const modal = document.getElementById('receiptModal');
        modal.classList.remove('hidden');
        setTimeout(() => {
            modal.classList.add('active');
        }, 10);
    }

    function closeReceiptModal() {
        const modal = document.getElementById('receiptModal');
        modal.classList.remove('active');
        setTimeout(() => {
            modal.classList.add('hidden');
        }, 300);
    }

    // Modal functions for processing
    function showProcessingModal(message) {
        const modal = document.getElementById('processingModal');
        document.getElementById('processingText').textContent = message;
        modal.classList.remove('hidden');
    }

    function closeProcessingModal() {
        const modal = document.getElementById('processingModal');
        modal.classList.add('hidden');
    }

    // Load initial revenue when the page loads
    window.onload = function() {
        document.getElementById('revenueCount').textContent = `$${totalRevenue.toFixed(2)}`;
    }
</script>

      <div id="settings" class="tab-content hidden p-6 text-center">
        <div class="text-4xl text-gray-400 mb-4">⚙️</div>
        <p class="text-xl">Customize your account, preferences, and security options here.</p>
      </div>
    </main>
  </div>

  <div id="mobileMenuModal" class="fixed inset-0 bg-black/70 backdrop-blur-sm hidden md:hidden z-50">
    <div class="absolute right-0 top-0 h-full w-64 bg-black border-l border-gray-700 slide-out-menu">
      <div class="p-6 border-b border-gray-700 flex justify-between items-center">
        <h2 class="text-2xl font-bold text-white">Menu</h2>
        <button id="closeMenu" class="p-2 rounded-lg text-white">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <nav class="flex-1 p-4 flex flex-col gap-2">
        <button class="nav-btn-mobile flex items-center gap-3 px-4 py-2 rounded-lg hover:bg-gray-800" data-tab="overview">
          <i class="fas fa-chart-line"></i> Overview
        </button>
        <button class="nav-btn-mobile flex items-center gap-3 px-4 py-2 rounded-lg hover:bg-gray-800" data-tab="contract">
          <i class="fas fa-file-contract"></i> Contract
        </button>
        <button class="nav-btn-mobile flex items-center gap-3 px-4 py-2 rounded-lg hover:bg-gray-800" data-tab="dust">
          <i class="fas fa-magic"></i> Dust
        </button>
        <button class="nav-btn-mobile flex items-center gap-3 px-4 py-2 rounded-lg hover:bg-gray-800" data-tab="billing">
          <i class="fas fa-receipt"></i> Billing
        </button>
        <button class="nav-btn-mobile flex items-center gap-3 px-4 py-2 rounded-lg hover:bg-gray-800" data-tab="payment">
          <i class="fas fa-dollar-sign"></i> Payment
        </button>
        <button class="nav-btn-mobile flex items-center gap-3 px-4 py-2 rounded-lg hover:bg-gray-800" data-tab="settings">
          <i class="fas fa-cog"></i> Settings
        </button>
      </nav>
    </div>
  </div>


  <div id="addContractModal" class="hidden fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center modal-overlay p-4">
    <div class="bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 p-8 rounded-2xl border border-white/20 w-full max-w-lg shadow-2xl relative">
      <h2 class="text-2xl font-bold mb-6 text-white text-center">✨ Add Contract</h2>
      <label class="block text-gray-300 text-sm mb-2">User Name</label>
      <input id="userName" type="text" placeholder="Enter user name" class="w-full mb-5 px-4 py-3 rounded-xl bg-white/5 border border-white/20 text-white placeholder-gray-400 focus:outline-none focus:border-blue-400 focus:ring-2 focus:ring-blue-500/40 transition">
      <label class="block text-gray-300 text-sm mb-2">Contract Type</label>
      <select id="contractType" class="w-full mb-6 px-4 py-3 rounded-xl bg-white/5 border border-white/20 text-white focus:outline-none focus:border-blue-400 focus:ring-2 focus:ring-blue-500/40 transition">
        <option class="bg-gray-900 text-white">Real Estate</option>
        <option class="bg-gray-900 text-white">2 Terms</option>
        <option class="bg-gray-900 text-white">Quick Productive</option>
        <option class="bg-gray-900 text-white">Binary</option>
        <option class="bg-gray-900 text-white">Development</option>
        <option class="bg-gray-900 text-white">Oil Reign</option>
        <option class="bg-gray-900 text-white">Infrastructure</option>
        <option class="bg-gray-900 text-white">Premium Quick Contract</option>
      </select>
      <div class="mb-8">
        <label class="block text-gray-300 text-sm mb-2">Contract Code</label>
        <div class="flex flex-col sm:flex-row gap-2">
          <input id="contractCode" type="text" readonly placeholder="Generate a code" class="flex-1 px-4 py-3 rounded-xl bg-white/5 border border-white/20 text-white placeholder-gray-500 focus:outline-none">
          <button onclick="generateContractCode()" class="px-4 py-3 rounded-xl bg-gradient-to-r from-green-500 to-emerald-400 hover:from-green-600 hover:to-emerald-500 text-white font-semibold shadow-md hover:shadow-lg transition">
            Create
          </button>
        </div>
      </div>
      <div class="flex flex-col sm:flex-row justify-end gap-3">
        <button onclick="closeModal('addContractModal')" class="px-5 py-3 rounded-xl bg-white/5 border border-white/20 text-white hover:bg-white/10 hover:border-white/40 transition">
          Close
        </button>
        <button id="saveBtn" onclick="continueContract()" class="px-5 py-3 rounded-xl bg-gradient-to-r from-blue-500 to-indigo-500 hover:from-blue-600 hover:to-indigo-600 text-white font-semibold shadow-md hover:shadow-lg transition disabled:opacity-40" disabled>
          Continue
        </button>
      </div>
    </div>
  </div>

  <div id="loadingScreen" class="hidden fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center modal-overlay">
    <div class="flex flex-col items-center">
      <div class="animate-spin rounded-full h-20 w-20 border-t-4 border-b-4 border-blue-400 mb-4"></div>
      <p id="loading-message" class="text-white text-lg font-medium animate-pulse">Preparing your contract...</p>
    </div>
  </div>

  <div id="continueContractModal" class="hidden fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center modal-overlay p-4">
    <div class="bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 p-8 rounded-2xl border border-white/20 w-full max-w-lg shadow-2xl text-center">
      <div class="flex justify-center mb-4">
        <i class="fas fa-file-contract text-4xl text-red-500"></i>
      </div>
      <div class="bg-red-600/20 border border-red-500 text-red-400 p-4 rounded-xl mb-6">
        <h2 class="text-xl font-bold mb-2">⚠️ Pending Contract</h2>
        <p class="text-sm">Your contract has been generated but is not yet active.<br>Please make a payment to activate your contract.</p>
      </div>
      <p class="text-gray-300 mb-3">Proceed to contract page to activate:</p>
      <button onclick="openTab('contract')" class="block w-full text-center px-6 py-3 rounded-xl bg-gradient-to-r from-red-500 to-pink-600 hover:from-red-600 hover:to-pink-700 text-white font-semibold shadow-md hover:shadow-lg transition">
        💳 Go to Contract Page
      </button>
      <button onclick="closeModal('continueContractModal')" class="mt-5 px-6 py-2 rounded-xl bg-white/10 border border-white/20 text-gray-300 hover:bg-white/20 hover:text-white transition">
        Close
      </button>
    </div>
  </div>
  
  <div id="verificationModal" class="hidden fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center modal-overlay p-4">
    <div class="bg-gray-900 p-8 rounded-2xl border border-gray-700 shadow-2xl w-full max-w-lg text-center">
        <div id="verificationIcon" class="mb-4">
            <i class="fas fa-spinner fa-spin text-4xl text-blue-400"></i>
        </div>
        <h2 id="verificationTitle" class="text-xl font-bold mb-2 text-white">Verifying...</h2>
        <p id="verificationMessage" class="text-gray-400">Checking code...</p>
        <button id="closeVerificationBtn" onclick="closeModal('verificationModal')" class="mt-6 px-6 py-2 rounded-xl bg-gray-700 text-white hidden">Close</button>
    </div>
  </div>

  <div id="dustContractModal" class="hidden fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center modal-overlay p-4">
    <div class="bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 p-8 rounded-2xl border border-white/20 w-full max-w-lg shadow-2xl relative">
      <h2 class="text-2xl font-bold mb-6 text-white text-center">Dust a Contract</h2>
      <p class="text-gray-400 mb-4 text-sm text-center">Select an active contract to move it to the "Dust" archive.</p>
      <select id="activeContractsDropdown" class="w-full mb-6 px-4 py-3 rounded-xl bg-white/5 border border-white/20 text-white focus:outline-none focus:border-yellow-400 focus:ring-2 focus:ring-yellow-500/40 transition">
        <option value="" disabled selected>-- Select a contract --</option>
      </select>
      <div class="flex flex-col sm:flex-row justify-end gap-3">
        <button onclick="closeModal('dustContractModal')" class="px-5 py-3 rounded-xl bg-white/5 border border-white/20 text-white hover:bg-white/10 hover:border-white/40 transition">
          Cancel
        </button>
        <button onclick="dustSelectedContract()" class="px-5 py-3 rounded-xl bg-gradient-to-r from-yellow-500 to-orange-500 hover:from-yellow-600 hover:to-orange-600 text-white font-semibold shadow-md hover:shadow-lg transition">
          <i class="fas fa-trash-alt"></i> Dust It
        </button>
      </div>
    </div>
  </div>

  <div id="restoreContractModal" class="hidden fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center modal-overlay p-4">
    <div class="bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 p-8 rounded-2xl border border-white/20 w-full max-w-lg shadow-2xl relative">
      <h2 class="text-2xl font-bold mb-6 text-white text-center">Restore a Contract</h2>
      <p class="text-gray-400 mb-4 text-sm text-center">Select a dusted contract to restore it to the active list.</p>
      <select id="dustedContractsDropdown" class="w-full mb-6 px-4 py-3 rounded-xl bg-white/5 border border-white/20 text-white focus:outline-none focus:border-green-400 focus:ring-2 focus:ring-green-500/40 transition">
        <option value="" disabled selected>-- Select a contract --</option>
      </select>
      <div class="flex flex-col sm:flex-row justify-end gap-3">
        <button onclick="closeModal('restoreContractModal')" class="px-5 py-3 rounded-xl bg-white/5 border border-white/20 text-white hover:bg-white/10 hover:border-white/40 transition">
          Cancel
        </button>
        <button onclick="restoreSelectedContract()" class="px-5 py-3 rounded-xl bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 text-white font-semibold shadow-md hover:shadow-lg transition">
          <i class="fas fa-sync-alt"></i> Restore It
        </button>
      </div>
    </div>
  </div>
  
  <script>
    // ======= GLOBAL DATA (persistent with localStorage) =======
    // For testing, explicitly reset all data to a 'null' state
    let pendingContractsCount = 0;
    let totalContractsCount = 0;
    let revenueCount = 0; // New variable to track total revenue
    let lastGeneratedCode = "";
    let contracts = [];
    let dustedContracts = [];
    let recentActivity = [];
    let revenueActivity = [];

    // Initialize data in localStorage for the first time if needed, otherwise reset
    function initializeData() {
        localStorage.setItem("pendingContractsCount", "0");
        localStorage.setItem("totalContractsCount", "0");
        localStorage.setItem("revenueCount", "0");
        localStorage.setItem("lastGeneratedCode", "");
        localStorage.setItem("contracts", "[]");
        localStorage.setItem("dustedContracts", "[]");
        localStorage.setItem("recentActivity", "[]");
        localStorage.setItem("revenueActivity", "[]");
    }

    // Call this to start a fresh test session
    initializeData();

    function saveState() {
      localStorage.setItem("pendingContractsCount", pendingContractsCount);
      localStorage.setItem("totalContractsCount", totalContractsCount);
      localStorage.setItem("revenueCount", revenueCount);
      localStorage.setItem("lastGeneratedCode", lastGeneratedCode);
      localStorage.setItem("contracts", JSON.stringify(contracts));
      localStorage.setItem("dustedContracts", JSON.stringify(dustedContracts));
      localStorage.setItem("recentActivity", JSON.stringify(recentActivity));
      localStorage.setItem("revenueActivity", JSON.stringify(revenueActivity));
    }

    function getEl(id) {
      const el = document.getElementById(id);
      if (!el) console.warn(`Element #${id} not found`);
      return el;
    }

    function logActivity(message, type) {
      recentActivity.unshift({
        message: message,
        type: type,
        date: new Date().toLocaleDateString() + ' ' + new Date().toLocaleTimeString(),
      });
      // Keep only the last 10 activities to prevent the list from getting too long
      if (recentActivity.length > 10) {
        recentActivity.pop();
      }
      saveState();
      renderRecentActivity();
    }
    
    function logRevenueActivity(message, type) {
        revenueActivity.unshift({
            message: message,
            type: type,
            date: new Date().toLocaleDateString() + ' ' + new Date().toLocaleTimeString(),
        });
        if (revenueActivity.length > 10) {
            revenueActivity.pop();
        }
        saveState();
        renderRevenueActivity();
    }


    function renderCounts() {
      const p = getEl("pendingCount");
      const t = getEl("totalCount");
      const r = getEl("revenueCount");
      const u = getEl("usersCount");
      if (p) p.textContent = String(pendingContractsCount);
      if (t) t.textContent = String(totalContractsCount);
      if (r) r.textContent = `$${revenueCount.toLocaleString()}`;
      if (u) u.textContent = "0";
    }

    function renderContracts() {
      const contractList = getEl("activeContractsDropdown");
      const contractTableBody = document.querySelector("#overview table tbody");
      if (!contractList || !contractTableBody) return;

      contractList.innerHTML = `<option value="" disabled selected>-- Select a contract --</option>`;
      contractTableBody.innerHTML = '';

      const activeContracts = contracts.filter(c => c.status === 'active');
      const pendingContracts = contracts.filter(c => c.status === 'pending');

      if (activeContracts.length === 0) {
        contractTableBody.innerHTML = `<tr class="hover:bg-[#222] transition"><td colspan="4" class="text-center text-gray-500 py-4">No contracts yet.</td></tr>`;
      } else {
        activeContracts.forEach(contract => {
          // Render to dropdown
          const option = document.createElement("option");
          option.value = contract.code;
          option.textContent = `${contract.userName} - ${contract.type}`;
          contractList.appendChild(option);

          // Render to table
          const row = document.createElement("tr");
          row.className = "hover:bg-[#222] transition";
          row.innerHTML = `
            <td class="px-4 py-2 border-b border-white/20">${contract.code.substring(0, 8)}...</td>
            <td class="px-4 py-2 border-b border-white/20">${contract.userName}</td>
            <td class="px-4 py-2 border-b border-white/20">
              <span class="px-2 py-1 rounded-full text-xs font-semibold ${contract.status === 'active' ? 'bg-green-600/20 text-green-400' : 'bg-red-600/20 text-red-400'}">
                ${contract.status}
              </span>
            </td>
            <td class="px-4 py-2 border-b border-white/20">${contract.date}</td>
          `;
          contractTableBody.appendChild(row);
        });
      }
    }

    function renderDustedContracts() {
      const dustedListContainer = getEl("dusted-contracts-list");
      if (!dustedListContainer) return;

      dustedListContainer.innerHTML = '';

      if (dustedContracts.length === 0) {
        dustedListContainer.innerHTML = `<div class="text-center text-gray-500 py-10">No contracts have been dusted yet.</div>`;
      } else {
        dustedContracts.forEach(contract => {
          const contractCard = document.createElement("div");
          contractCard.className = "flex items-center justify-between p-4 bg-gray-800 rounded-xl border border-gray-700 shadow";
          contractCard.innerHTML = `
            <div>
              <p class="font-semibold text-white">${contract.userName}</p>
              <p class="text-sm text-gray-400">${contract.type}</p>
              <p class="text-xs text-gray-500">${contract.code.substring(0, 10)}... <br> Dusted on: ${contract.date}</p>
            </div>
            <button onclick="restoreContract('${contract.code}')" class="px-4 py-2 rounded-lg bg-green-600/20 text-green-400 border border-green-500 hover:bg-green-600/30 transition">
              <i class="fas fa-sync-alt"></i> Restore
            </button>
          `;
          dustedListContainer.appendChild(contractCard);
        });
      }
    }

    function renderRecentActivity() {
      const activityList = getEl("recent-activity-log");
      if (!activityList) return;

      activityList.innerHTML = '';
      if (recentActivity.length === 0) {
        activityList.innerHTML = `<li class="p-3 border border-white/20 rounded-lg bg-[#0d0d0d] hover:bg-[#222] transition">No activity yet.</li>`;
      } else {
        recentActivity.forEach(activity => {
          let icon = '';
          let color = '';
          if (activity.type === 'create') {
            icon = 'fas fa-plus-circle';
            color = 'text-blue-400';
          } else if (activity.type === 'activate') {
            icon = 'fas fa-check-circle';
            color = 'text-green-500';
          } else if (activity.type === 'dust') {
            icon = 'fas fa-trash-alt';
            color = 'text-yellow-400';
          } else if (activity.type === 'restore') {
            icon = 'fas fa-sync-alt';
            color = 'text-purple-400';
          }

          const listItem = document.createElement("li");
          listItem.className = "p-3 border border-white/20 rounded-lg bg-[#0d0d0d] hover:bg-[#222] transition flex justify-between items-center";
          listItem.innerHTML = `
            <div class="flex items-center gap-3">
                <i class="${icon} ${color}"></i>
                <span class="text-sm text-gray-300">${activity.message}</span>
            </div>
            <span class="text-xs text-gray-500">${activity.date}</span>
          `;
          activityList.appendChild(listItem);
        });
      }
    }

    function renderRevenueActivity() {
        const revenueActivityList = getEl("revenue-activity-log");
        if (!revenueActivityList) return;

        revenueActivityList.innerHTML = '';
        if (revenueActivity.length === 0) {
            revenueActivityList.innerHTML = `<li class="p-3 border border-white/20 rounded-lg bg-[#0d0d0d] hover:bg-[#222] transition">No revenue activity recorded.</li>`;
        } else {
            revenueActivity.forEach(activity => {
                let icon = '';
                let color = '';
                if (activity.type === 'gain') {
                    icon = 'fas fa-arrow-up';
                    color = 'text-green-500';
                } else if (activity.type === 'loss') {
                    icon = 'fas fa-arrow-down';
                    color = 'text-red-500';
                }

                const listItem = document.createElement("li");
                listItem.className = "p-3 border border-white/20 rounded-lg bg-[#0d0d0d] hover:bg-[#222] transition flex justify-between items-center";
                listItem.innerHTML = `
                    <div class="flex items-center gap-3">
                        <i class="${icon} ${color}"></i>
                        <span class="text-sm text-gray-300">${activity.message}</span>
                    </div>
                    <span class="text-xs text-gray-500">${activity.date}</span>
                `;
                revenueActivityList.appendChild(listItem);
            });
        }
    }

    function openModal(id) {
      const m = getEl(id);
      if (m) m.classList.remove("hidden");
    }
    function closeModal(id) {
      const m = getEl(id);
      if (m) m.classList.add("hidden");
    }

    // Slide-out menu functions
    const mobileMenuModal = getEl('mobileMenuModal');
    const slideOutMenu = mobileMenuModal.querySelector('.slide-out-menu');

    getEl('openMenu')?.addEventListener('click', () => {
      mobileMenuModal.classList.remove('hidden');
      setTimeout(() => slideOutMenu.classList.add('open'), 10);
    });

    getEl('closeMenu')?.addEventListener('click', () => {
      slideOutMenu.classList.remove('open');
      setTimeout(() => mobileMenuModal.classList.add('hidden'), 300);
    });

    mobileMenuModal.addEventListener('click', (e) => {
      if (e.target === mobileMenuModal) {
        getEl('closeMenu')?.click();
      }
    });

    function showLoading(forMs = 6000, after, message = "Preparing your contract...") {
      let overlay = getEl("loadingScreen");
      let loadingMessageEl = getEl("loading-message");
      if (!overlay || !loadingMessageEl) {
        console.error("Loading overlay elements not found.");
        return;
      }
      loadingMessageEl.textContent = message;
      overlay.classList.remove("hidden");
      setTimeout(() => {
        overlay.classList.add("hidden");
        if (typeof after === "function") after();
      }, forMs);
    }

    function validateFormEnableSave() {
      const name = getEl("userName")?.value.trim();
      const type = getEl("contractType")?.value;
      const code = getEl("contractCode")?.value.trim();
      const saveBtn = getEl("saveBtn");

      const isValid = Boolean(name && type && code);
      if (saveBtn) {
        saveBtn.disabled = !isValid;
        saveBtn.textContent = "Continue";
      }
    }

    function generateContractCode() {
      const chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";
      let code = "";
      for (let i = 0; i < 17; i++) code += chars.charAt(Math.floor(Math.random() * chars.length));
      code += "100"; // Ensure the code always ends in 100

      const codeInput = getEl("contractCode");
      if (codeInput) codeInput.value = code;
      lastGeneratedCode = code;
      saveState();
      validateFormEnableSave();
    }

    function continueContract() {
      const userName = getEl("userName")?.value.trim();
      const contractType = getEl("contractType")?.value;
      const contractCode = getEl("contractCode")?.value.trim();

      if (!userName || !contractType || !contractCode) {
        alert("Please fill in all fields before continuing.");
        return;
      }

      contracts.push({
        code: contractCode,
        userName: userName,
        type: contractType,
        status: 'pending',
        date: new Date().toLocaleDateString()
      });

      pendingContractsCount += 1;
      saveState();
      renderCounts();
      renderContracts();
      logActivity(`New pending contract created for ${userName}.`, 'create');
      renderRecentActivity();

      // Update the auto-generated code field on the contract tab
      const autoCodeField = getEl("autoGeneratedCode");
      if (autoCodeField) {
        autoCodeField.value = lastGeneratedCode;
      }

      closeModal("addContractModal");
      showLoading(3000, () => openModal("continueContractModal"), "Creating contract...");

      const nameEl = getEl("userName");
      const typeEl = getEl("contractType");
      const codeEl = getEl("contractCode");
      const saveBtn = getEl("saveBtn");

      if (nameEl) nameEl.value = "";
      if (typeEl) typeEl.selectedIndex = 0;
      if (codeEl) codeEl.value = "";
      if (saveBtn) saveBtn.disabled = true;
    }

    function verifyAndActivate() {
      const autoGeneratedCode = getEl("autoGeneratedCode")?.value.trim();
      const newCodeOnReceipt = getEl("newCodeOnReceipt")?.value.trim();
      const verificationStatusEl = getEl("verification-status");
      const verifyBtn = getEl('verifyBtn');

      if (!newCodeOnReceipt) {
        verificationStatusEl.textContent = "Please enter the code from your receipt.";
        verificationStatusEl.className = "mt-4 text-center text-sm font-semibold text-red-500";
        verificationStatusEl.classList.remove("hidden");
        return;
      }

      // Show spinner on the button
      verifyBtn.innerHTML = `<i class="fas fa-spinner fa-spin mr-2"></i> Verifying...`;
      verifyBtn.disabled = true;

      setTimeout(() => {
        let isCodeMatch = false;

        // Check for exact match AND that the code ends with 100
        if (newCodeOnReceipt === autoGeneratedCode && newCodeOnReceipt.endsWith("100")) {
          isCodeMatch = true;
        }

        if (isCodeMatch) {
          activateContract(autoGeneratedCode);
          verificationStatusEl.textContent = "Contract activated successfully!";
          verificationStatusEl.className = "mt-4 text-center text-sm font-semibold text-green-500";
          
        } else {
          verificationStatusEl.textContent = "The code is incorrect or does not end with '100'.";
          verificationStatusEl.className = "mt-4 text-center text-sm font-semibold text-red-500";
          alert("The code you entered is invalid. Please ensure it matches the auto-generated code and ends with '100'.");
        }

        // Restore button state
        verifyBtn.innerHTML = `Verify and Activate`;
        verifyBtn.disabled = false;
        verificationStatusEl.classList.remove("hidden");

        getEl('autoGeneratedCode').value = '';
        getEl('newCodeOnReceipt').value = '';
      }, 5000);
    }

    function activateContract(contractCode) {
      const contractIndex = contracts.findIndex(c => c.code === contractCode);
      if (contractIndex !== -1 && contracts[contractIndex].status === 'pending') {
        contracts[contractIndex].status = 'active';
        pendingContractsCount -= 1;
        totalContractsCount += 1;
        saveState();
        renderCounts();
        renderContracts();
        logActivity(`Contract "${contracts[contractIndex].userName}" activated.`, 'activate');
        renderRecentActivity();
      } else {
        const statusEl = getEl("verification-status");
        statusEl.textContent = "No pending contracts to activate.";
        statusEl.className = "mt-4 text-center text-sm font-semibold text-yellow-500";
        statusEl.classList.remove("hidden");
      }
    }

    function dustSelectedContract() {
      const dropdown = getEl("activeContractsDropdown");
      const selectedCode = dropdown.value;
      if (!selectedCode) {
        alert("Please select a contract to dust.");
        return;
      }

      // Find the contract to be dusted
      const contractIndex = contracts.findIndex(c => c.code === selectedCode);
      if (contractIndex === -1) {
        alert("Contract not found.");
        return;
      }

      const [contractToDust] = contracts.splice(contractIndex, 1);
      dustedContracts.unshift(contractToDust);
      totalContractsCount -= 1;
      saveState();
      closeModal('dustContractModal');
      renderContracts();
      renderDustedContracts();
      renderCounts();
      logActivity(`Contract "${contractToDust.userName}" was dusted.`, 'dust');
      renderRecentActivity();
      alert("Contract has been moved to the Dust archive.");
    }

    function restoreContract(contractCode) {
      const dustedContractIndex = dustedContracts.findIndex(c => c.code === contractCode);
      if (dustedContractIndex === -1) {
        alert("Dusted contract not found.");
        return;
      }

      const [contractToRestore] = dustedContracts.splice(dustedContractIndex, 1);
      contracts.unshift(contractToRestore);
      totalContractsCount += 1;
      saveState();
      renderContracts();
      renderDustedContracts();
      renderCounts();
      logActivity(`Contract "${contractToRestore.userName}" was restored from dust.`, 'restore');
      renderRecentActivity();
      alert("Contract has been restored to the active list.");
    }

    function simulatePayment() {
        const paymentAmount = 500;
        revenueCount += paymentAmount;
        saveState();
        renderCounts();
        logRevenueActivity(`Gained $${paymentAmount} from a new payment.`, 'gain');
    }


    // Tab switching logic
    function openTab(tabId) {
      // Hide all tab content
      document.querySelectorAll('.tab-content').forEach(tab => {
        tab.classList.add('hidden');
      });

      // Remove active class from all nav buttons
      document.querySelectorAll('.nav-btn, .nav-btn-mobile').forEach(btn => {
        btn.classList.remove('bg-gray-700', 'text-white');
        btn.classList.add('hover:bg-gray-800');
      });

      // Show the selected tab content
      const selectedTab = getEl(tabId);
      if (selectedTab) {
        selectedTab.classList.remove('hidden');
      }

      // Add active class to the current button
      document.querySelectorAll(`.nav-btn[data-tab='${tabId}'], .nav-btn-mobile[data-tab='${tabId}']`).forEach(btn => {
        btn.classList.add('bg-gray-700', 'text-white');
        btn.classList.remove('hover:bg-gray-800');
      });

      // Update mobile header title
      const pageTitleMobile = getEl('page-title-mobile');
      if (pageTitleMobile) {
        pageTitleMobile.textContent = tabId;
      }
      // Update desktop header title
      const pageTitleDesktop = getEl('page-title');
      if (pageTitleDesktop) {
        pageTitleDesktop.textContent = tabId;
      }
      
      // Close the mobile menu if it's open
      getEl('closeMenu')?.click();
    }

    // Event listeners for tab switching
    document.querySelectorAll('.nav-btn, .nav-btn-mobile').forEach(button => {
      button.addEventListener('click', (e) => {
        const tab = e.currentTarget.dataset.tab;
        openTab(tab);
      });
    });

    // Initial render on page load
    document.addEventListener("DOMContentLoaded", () => {
        // Simulate a brief load
        const loader = getEl("initial-loader");
        const overviewTab = getEl("overview");
        setTimeout(() => {
            loader.classList.add("hidden");
            overviewTab.classList.remove("hidden");
            renderCounts();
            renderContracts();
            renderDustedContracts();
            renderRecentActivity();
            renderRevenueActivity();
            openTab('overview'); // Set initial tab after loading
        }, 1500); // 1.5-second delay
    });
  </script>
</body>
</html>













